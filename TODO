Now:
  o) Lexer fixes
    o) fix compound double quotes
    o) are long comments subtly broken?
    o) macro substitution, local and global
        o) the ++ and -- operators for macros
        o) the c(), e() and r() pseudo-operators

  o) Stata's "stored results"
    o) creturn

  o) code in a {{{.....}}} block should execute in a specially prepared environment

  o) Loops: much harder, because of macros

  o) there should be more than one debug level

  o) syntax for weird commands
    o) does all this require a GLR parser?

    o) recode - define a varlist in the grammar and allow it as the LHS of an assignment
    o) ivregress - probably the same as with recode; the last expression_list member should be an
       assignment, optionally parenthesized, required to be parenthesized for non-ambiguity if LHS has
       more than one var
    o) collapse - just parse it as a varlist but interpret the "stats" differently; parens become optional
        o) if you want to use a stat as a varname, just give the target=varname form
    o) gsort - or need an algorithm to turn a parse tree of vars, + and - into a list of two-element pairs
    o) lrtest
    o) test
    o) anova

    o) fill out their functions' calling signatures

Backend:
  o) infrastructural R functions
    o) for prefix commands - quietly, noisily, capture, by, bysort, xi
    o) varlist_to_formula
    o) for operators - how many of these even need to exist?

  o) complete all the commands which now have stubs

  o) comparisons with string and numeric missings will yield NA, like R, rather
     than booleans like Stata

===============================================================================
Systematic debugging:
  o) use testthat and travis
  o) write a unit test suite
  o) test, test, test...

Documentation:
  o) document package object and rstata()
  o) update README
  o) long vignette: comprehensive
  o) short vignette: summary + differences from Stata
  o) document the R expression format the parser emits

Misc:
  o) figure out the NAMESPACE and what you have to export
  o) clean up gitignore and Rbuildignore
  o) Makevars and Makefile have to come from a configure script for
     portability - autoconf?

===============================================================================
Wishlist functionality:
  o) the way it stores ado command history is a godawful hack, probably
     also a race condition, and is Unix-specific

  o) A mechanism for the user to register an R function obeying the
     calling convention as a Stata command, persistently

  o) graphics
